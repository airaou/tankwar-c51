#include<mainfile\app_battle_stream.h>
#include<common\lcd12864_draw.h>
#include<common\hard.h>
code unsigned char app_battle_stream_picture[/*num*/][8/*y*/]=
{
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},//None
	{0x18,0x18,0xbd,0xdb,0xbd,0xbd,0xdb,0xbd},//Tank1_U, 
	{0x3f,0x12,0x2d,0xff,0xff,0x2d,0x12,0x3f},//Tank1_L,
	{0xfc,0x48,0xb4,0xff,0xff,0xb4,0x48,0xfc},//Tank1_R,
	{0xbd,0xdb,0xbd,0xbd,0xdb,0xbd,0x18,0x18},//Tank1_D,
	{0x18,0x18,0xdb,0xbd,0xbd,0xff,0xbd,0xdb},//Tank2_U,	
	{0x3f,0x25,0x1e,0xff,0xff,0x1e,0x25,0x3f},//Tank2_L,
	{0xfc,0xa4,0x78,0xff,0xff,0x78,0xa4,0xfc},//Tank2_R,
	{0xdb,0xbd,0xff,0xbd,0xbd,0xdb,0x18,0x18},//Tank2_D, 
	{0xff,0xaa,0xff,0xaa,0xff,0xaa,0xff,0xaa},//Wall,
	{0x3c,0x42,0x81,0x81,0x81,0x81,0x42,0x3c},//Box,
	{0x00,0x70,0x07,0x00,0x78,0x00,0x1e,0x00},//Water,
	{0x72,0xaf,0x55,0x6b,0xd6,0xaa,0xf4,0x4e},//Grass,
	{0x66,0xbb,0xd5,0x6a,0x56,0xab,0xdd,0x66},//Rattan,
	{0x7e,0x66,0x5a,0x66,0x7e,0x40,0x40,0x40},//Bird
	{0x00,0x24,0x5a,0x42,0x44,0x2e,0x14,0x00},//Tool_life,
	{0x00,0x18,0x18,0x18,0x34,0x7e,0x34,0x00},//Tool_fire,
	{0x00,0x7e,0x42,0x5e,0x54,0x5e,0x74,0x00},//Tool_speed,
	{0x00,0x00,0x00,0x3c,0x3c,0x00,0x00,0x00} //Bomb					   
};
			
code unsigned char app_battle_stream_letter[][8/*y*/]=
{
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},//' '
	{0x20,0x20,0x20,0x20,0x20,0x00,0x20,0x20},//!	 
	{0x00,0x50,0x50,0x00,0x00,0x00,0x00,0x00},//"
	{0x50,0x50,0xf8,0x50,0x50,0xf8,0x50,0x50},//#
	{0xf8,0x00,0xf8,0x50,0x50,0xf8,0x50,0x50},//$
	{0xe0,0xa0,0xe8,0x10,0x20,0x78,0xa8,0x38},//%
	{0xf8,0x88,0x90,0xa0,0x48,0xa8,0x90,0xe8},//&
	{0x00,0x20,0x20,0x00,0x00,0x00,0x00,0x00},//'
	{0x20,0x40,0x80,0x80,0x80,0x80,0x40,0x20},//(
	{0x20,0x10,0x08,0x08,0x08,0x08,0x10,0x20},//)
	{0x00,0x88,0x50,0x20,0x50,0x88,0x00,0x00},//*
	{0x00,0x20,0x20,0xf8,0x20,0x20,0x00,0x00},//+
	{0x00,0x00,0x00,0x00,0x20,0x10,0x10,0x00},//¡¢
	{0x00,0x00,0x00,0xf8,0x00,0x00,0x00,0x00},//-
	{0x00,0x00,0x00,0x20,0x20,0x00,0x00,0x00},//¡¤
	{0x08,0x10,0x10,0x20,0x20,0x40,0x40,0x80},/// 
	{0xf8,0x88,0x88,0x88,0x88,0x88,0x88,0xf8},//0
	{0xe0,0x20,0x20,0x20,0x20,0x20,0x20,0xf8},//1
	{0xf8,0x08,0x08,0xf8,0x80,0x80,0x80,0xf8},//2
	{0xf8,0x08,0x08,0xf8,0x08,0x08,0x08,0xf8},//3
	{0x88,0x88,0x88,0xf8,0x08,0x08,0x08,0x08},//4 
	{0xf8,0x80,0x80,0xf8,0x08,0x08,0x08,0xf8},//5
	{0xf8,0x80,0x80,0xf8,0x88,0x88,0x88,0x88},//6
	{0xf8,0x88,0x88,0x88,0x08,0x08,0x08,0x08},//7
	{0xf8,0x88,0x88,0xf8,0x88,0x88,0x88,0xf8},//8
	{0xf8,0x88,0x88,0xf8,0x08,0x08,0x08,0x08},//9
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},//:
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},//;
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},//<  
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},//=
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},//>
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},//?
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},//@
	{0xf8,0x88,0x88,0xf8,0x88,0x88,0x88,0x88},//A
	{0xf0,0x88,0x88,0xf0,0x88,0x88,0x88,0xf0},//B
	{0xf8,0x80,0x80,0x80,0x80,0x80,0x80,0xf8},//C
	{0xf0,0x88,0x88,0x88,0x88,0x88,0x88,0xf0},//D										 
	{0xf8,0x80,0x80,0xf0,0x80,0x80,0x80,0xf8},//E
	{0xf8,0x80,0x80,0xf0,0x80,0x80,0x80,0x80},//F
	{0xf8,0x80,0x80,0xb8,0x88,0x88,0x88,0xf8},//G
	{0x88,0x88,0x88,0xf8,0x88,0x88,0x88,0x88},//H
	{0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20},//I
	{0xf8,0x10,0x10,0x10,0x10,0x10,0x90,0xf0},//J
	{0x88,0x88,0x90,0xa0,0xc0,0xa0,0x90,0x88},//K
	{0x80,0x80,0x80,0x80,0x80,0x80,0x80,0xf8},//L
	{0xf8,0xa8,0xa8,0xa8,0xa8,0xa8,0xa8,0xa8},//M
	{0xe8,0xa8,0xa8,0xa8,0xa8,0xa8,0xa8,0xb8},//N
	{0xf8,0x88,0x88,0x88,0x88,0x88,0x88,0xf8},//O
	{0xf8,0x88,0x88,0xf8,0x80,0x80,0x80,0x80},//P
	{0xf8,0x88,0x88,0x88,0x88,0xa8,0x90,0xe8},//Q
	{0xf8,0x88,0x88,0xf0,0x88,0x88,0x88,0x88},//R
	{0xf8,0x80,0x80,0xf8,0x08,0x08,0x08,0xf8},//S
	{0xf8,0x20,0x20,0x20,0x20,0x20,0x20,0x20},//T	
	{0x88,0x88,0x88,0x88,0x88,0x88,0x88,0xf8},//U
	{0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x70},//V
	{0xa8,0xa8,0xa8,0xa8,0xa8,0xa8,0xa8,0xf8},//W
	{0x88,0x88,0x88,0x70,0x88,0x88,0x88,0x88},//X
	{0x88,0x88,0x88,0xf8,0x20,0x20,0x20,0x20},//Y
	{0xf8,0x08,0x08,0xf8,0x80,0x80,0x80,0xf8} //Z
};

void app_battle_stream_char(unsigned char x,unsigned char y,unsigned char *word)
{
	do
	{
		draw_flashpic(x,y,app_battle_stream_letter[*word-' '],0);
		x+=6;
	}while(*++word);
}

unsigned char ctrlplayer=1;
app_battle_stream_key app_battle_stream_readkey()
{
	switch(ctrlplayer)
	{
	case 1:			  				 
		ctrlplayer=2;
		P00=0;
		P01=1;
		if(S1==0)return app_battle_stream_key_P1_L;
		if(S2==0)return app_battle_stream_key_P1_U;
		if(S3==0)return app_battle_stream_key_P1_D;
		if(S4==0)return app_battle_stream_key_P1_R;		   		
		if(P36==0)return app_battle_stream_key_P1_Fire;
		break;
	case 2:				 							 
		ctrlplayer=1; 
		P00=1;
		P01=0;
		if(S1==0)return app_battle_stream_key_P2_L;
		if(S2==0)return app_battle_stream_key_P2_U;
		if(S3==0)return app_battle_stream_key_P2_D;
		if(S4==0)return app_battle_stream_key_P2_R;		   		
		if(P36==0)return app_battle_stream_key_P2_Fire;
		break;
	}
	return app_battle_stream_key_None;
}