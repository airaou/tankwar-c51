#include<mainfile\app_battle_map.h>		
#include<mainfile\app_battle_unit.h>

code unsigned char app_battle_map_memory[/*mapnum*/][8/*y*/][6/*x*/]=
{
  	{
		{0x33,0x33,0x33,0x33,0x33,0x33},
		{0x31,0x11,0x11,0x11,0x11,0x13},
		{0x31,0x21,0x41,0x51,0x61,0x13},
		{0x31,0x11,0x11,0x11,0x11,0x13},
		{0x31,0x71,0x81,0x91,0xa1,0x13},
		{0x31,0x11,0x21,0x11,0x11,0x13},
		{0x31,0xb1,0x11,0x11,0x11,0x13},
		{0x33,0x33,0x33,0x33,0x33,0x33},
	},
  	{
		{0x33,0x33,0x33,0x33,0x33,0x33},
		{0x31,0x11,0x71,0x57,0x11,0x13},
		{0x31,0x11,0x76,0x67,0x11,0x13},
		{0x31,0x11,0x76,0x64,0x11,0x13},
		{0x31,0x11,0x46,0x67,0x11,0x13},
		{0x31,0x11,0x76,0x67,0x11,0x13},
		{0x31,0x11,0x71,0x17,0x11,0x13},
		{0x33,0x33,0x33,0x33,0x33,0x33},
	}
};

app_battle_unit_class app_battle_map_memory_read(unsigned char mapnum,unsigned char x,unsigned char y)
{
	mapnum=app_battle_map_memory[mapnum][y][x/2];
	(x%2)?(mapnum&=0xf):(mapnum>>=4);
	return mapnum;
}

void app_battle_map_create(unsigned char mapnum)
{
	unsigned char x,y;
	for(x=0;x<12;x++)for(y=0;y<8;y++)
	{
		xdata unsigned char temp[3];
		temp[0]=x;
		temp[1]=y;
		temp[2]=app_battle_map_memory_read(mapnum,x,y);
		app_battle_unit_handle[0][app_battle_unit_event_Create](temp,app_battle_map_LifeofBox);
	}
}